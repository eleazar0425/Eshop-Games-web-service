"use strict";var FunctionSource;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e.Parse="parse",e.Stringify="stringify"}(FunctionSource||(FunctionSource={}));var stringifyPrimitive=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e.toString():"";default:return""}},hasOwnProperty=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},handleAwesomeQuerystringError=function(e,r){switch(r){case FunctionSource.Parse:return{err:e};case FunctionSource.Stringify:default:return e}};exports.stringify=function(e,r){void 0===r&&(r={separator:"&",equals:"=",includeQuestion:!1});try{if(!e||Object.keys(e).length<=0)throw new Error("object_is_empty");if("object"!=typeof e)throw new Error("input_not_object");r.separator||(r.separator="&"),r.equals||(r.equals="="),r.includeQuestion||(r.includeQuestion=!1);var t=Object.keys(e).sort().map(function(t){var n=encodeURIComponent(stringifyPrimitive(t))+r.equals;return void 0===e[t]?"":null===e[t]?encodeURIComponent(t):Array.isArray(e[t])?e[t].map(function(e){return n+encodeURIComponent(stringifyPrimitive(e))}).join(r.separator):n+encodeURIComponent(stringifyPrimitive(e[t]))}).filter(Boolean);return r.includeQuestion&&(t[0]="?"+t[0]),t.join(r.separator)}catch(t){return/(?:object_is_empty)/i.test(t.toString())?(r.includeQuestion?"?":"")+encodeURIComponent(stringifyPrimitive(e)):/(?:input_not_object)/i.test(t.toString())?handleAwesomeQuerystringError("Awesome Querystring: Your input was not an object. Please supply an object when using Stringify",FunctionSource.Stringify):t}},exports.parse=function(e,r){void 0===e&&(e=""),void 0===r&&(r={separator:"&",equals:"="});try{if("string"!=typeof e)throw new Error("input_not_string");if(""===e)return{};r.separator||(r.separator="&"),r.equals||(r.equals="="),e.startsWith("?")&&(e=e.slice(1));var t={},n=/\+/g,o=e.split(r.separator),i=o.length;i>1e3&&(i=1e3);for(var s=0,u=o;s<u.length;s++){var a=u[s].replace(n,"%20"),c=a.indexOf(r.equals),p=void 0,l=void 0;c>=0?(p=a.substr(0,c),l=a.substr(c+1)):(p=a,l="");var y=decodeURIComponent(p),f=decodeURIComponent(l);hasOwnProperty(t,y)?Array.isArray(t[y])?t[y].push(f):t[y]=[t[y],f]:t[y]=f}return t}catch(e){return/(?:input_not_string)/i.test(e.toString())?handleAwesomeQuerystringError("Awesome Querystring: Your input was not an string. Please supply a string when using Parse",FunctionSource.Parse):e}};